#N canvas 0 25 1440 762 12;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-samp 862 float 2;
#X coords 0 1 862 -1 200 140 1 0 0;
#X restore 53 260 graph;
#X obj 982 71 inlet;
#X obj 1033 586 *~, f 22;
#X obj 1185 528 pack 0 5;
#X obj 1185 552 line~;
#X obj 1033 610 outlet~;
#X obj 1033 499 tabread4~ \$0-samp;
#X obj 1033 410 line~;
#X obj 1033 434 *~;
#X obj 1033 458 +~ 1;
#X obj 1089 407 r \$0-segLength;
#X obj 1089 431 - 2;
#X obj 1089 455 sig~;
#X obj 1075 198 r \$0-segLengthMS;
#X msg 1033 375 0 \, 1 \$1;
#X obj 1033 339 f;
#X obj 1075 319 * 1;
#X floatatom 1306 290 5 0 0 0 - - - 0;
#X obj 1237 275 t b f;
#X obj 1237 251 expr pow(2 \, -1*$f1/12);
#X floatatom 55 72 24 0 0 0 samps \$0-segStartSamps \$0-segStart 0;
#X floatatom 55 90 24 0 0 0 ms \$0-segStartMS \$0-segStartMSsnd 0;
#X obj 58 53 hsl 162 19 0 1 0 0 \$0-segStartNormalisedsnd \$0-segStartNormalised segment_start -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 82 25 673 498 segStartLogic 0;
#X obj 58 250 /, f 14;
#X obj 158 225 r \$1-fileLengthSamps;
#X obj 58 225 * 44.1;
#X obj 58 274 s \$0-segStartNormalised;
#X obj 59 16 r \$0-segStartNormalisedsnd;
#X obj 60 44 *;
#X obj 131 45 r \$1-fileLengthSamps;
#X obj 60 68 s \$0-segStartSamps;
#X obj 59 126 change;
#X obj 59 150 / 44.1;
#X obj 59 103 r \$0-segStart;
#X obj 59 174 s \$0-segStartMS;
#X obj 58 203 r \$0-segStartMSsnd;
#X connect 0 0 3 0;
#X connect 1 0 0 1;
#X connect 2 0 0 0;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 6 0 5 1;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 10 0 8 0;
#X connect 12 0 2 0;
#X restore 683 21 pd segStartLogic;
#N canvas 248 54 696 455 segLengthLogic 0;
#X obj 267 102 *;
#X obj 239 22 r \$1-fileLengthSamps;
#X obj 299 190 / 44.1;
#X obj 122 279 change;
#X obj 122 303 * 44.1;
#X obj 122 327 /, f 14;
#X obj 204 285 r \$1-fileLengthSamps;
#X obj 321 117 int;
#X obj 309 214 s \$0-segLengthMS;
#X obj 241 65 r \$0-segLengthNormalisedsnd;
#X obj 122 351 s \$0-segLengthNormalised;
#X obj 121 250 r \$0-segLengthMSsnd;
#X obj 300 164 r \$0-segLength;
#X obj 321 141 s \$0-segLengthSamps;
#X connect 0 0 7 0;
#X connect 1 0 0 1;
#X connect 2 0 8 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 10 0;
#X connect 6 0 5 1;
#X connect 7 0 13 0;
#X connect 9 0 0 0;
#X connect 11 0 3 0;
#X connect 12 0 2 0;
#X restore 804 22 pd segLengthLogic;
#X floatatom 54 166 24 0 0 0 ms \$0-segLengthMS \$0-segLengthMSsnd 0;
#X obj 57 129 hsl 162 19 0 1 0 0 \$0-segLengthNormalisedsnd \$0-segLengthNormalised segment_length -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 54 148 24 0 0 0 samps \$0-segLengthSamps \$0-segLength 0;
#X obj 151 238 tgl 19 0 \$0-rev empty reverse 20 10 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 311 25 1042 692 segWriteLogic 0;
#X obj 294 118 r \$0-segStart;
#X obj 293 66 r \$0-segLength;
#X obj 293 90 t f f, f 19;
#X obj 488 146 array size \$0-samp, f 10;
#X obj 27 235 until;
#X obj 27 209 t f b, f 12;
#X msg 76 240 0;
#X obj 27 269 +;
#X obj 66 268 + 1;
#X obj 256 428 +, f 18;
#X obj 294 142 t b f;
#X obj 27 185 f;
#X obj 27 294 t f f, f 16;
#X obj 27 619 tabwrite \$0-samp, f 60;
#X obj 297 7 r \$0-rev;
#X obj 297 30 t b f, f 49;
#X obj 443 376 expr if($f3 < 1 \, $f1 \, $f2-($f1+1)), f 28;
#X obj 47 24 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 27 586 *, f 33;
#X obj 27 321 t f f, f 8;
#X text 487 413 copy samples from main array to sub array with added amplitude envelope;
#X obj 256 459 tabread \$2;
#N canvas 121 146 450 355 applyAmpEnv 0;
#X obj 95 34 inlet;
#X obj 283 38 inlet;
#X obj 114 145 clip 0 1;
#X obj 114 248 +, f 12;
#X obj 195 142 -, f 6;
#X obj 195 194 clip 0 1;
#X obj 195 218 * -1;
#X obj 114 83 t f f, f 12;
#X obj 234 115 - 44;
#X obj 114 121 / 44;
#X obj 195 166 / 44;
#X obj 195 115 + 1;
#X obj 114 272 outlet;
#X connect 0 0 7 0;
#X connect 1 0 8 0;
#X connect 2 0 3 0;
#X connect 3 0 12 0;
#X connect 4 0 10 0;
#X connect 5 0 6 0;
#X connect 6 0 3 1;
#X connect 7 0 9 0;
#X connect 7 1 11 0;
#X connect 8 0 4 1;
#X connect 9 0 2 0;
#X connect 10 0 5 0;
#X connect 11 0 4 0;
#X restore 31 430 pd applyAmpEnv;
#X connect 0 0 10 0;
#X connect 1 0 2 0;
#X connect 2 0 11 0;
#X connect 2 1 3 0;
#X connect 2 1 16 1;
#X connect 2 1 22 1;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 5 1 6 0;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 7 0 12 0;
#X connect 8 0 7 1;
#X connect 9 0 21 0;
#X connect 10 0 11 0;
#X connect 10 1 9 1;
#X connect 11 0 5 0;
#X connect 12 0 19 0;
#X connect 12 1 16 0;
#X connect 14 0 15 0;
#X connect 15 0 11 0;
#X connect 15 1 16 2;
#X connect 16 0 13 1;
#X connect 17 0 11 0;
#X connect 18 0 13 0;
#X connect 19 0 22 0;
#X connect 19 1 9 0;
#X connect 21 0 18 1;
#X connect 22 0 18 0;
#X restore 701 55 pd segWriteLogic;
#X obj 56 204 hsl 162 19 -24 24 0 0 \$0-transposeSnd \$0-transposeRec Transpose -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 53 223 5 -24 24 0 - \$0-transposeRec1 \$0-transposeSnd1 0;
#N canvas 488 557 225 192 transposeLogic 0;
#X obj 36 11 r \$0-transposeSnd;
#X obj 36 35 change;
#X obj 36 59 s \$0-transposeRec1;
#X obj 35 123 change;
#X obj 35 99 r \$0-transposeSnd1;
#X obj 35 147 s \$0-transposeRec;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X restore 709 110 pd transposeLogic;
#X obj 1237 222 r \$0-transposeSnd;
#X obj 237 60 vsl 19 162 0 1 0 0 \$0-vol \$0-vol vol 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 1186 474 r \$0-vol;
#N canvas 525 105 1009 568 snapToZeroXings 0;
#X obj 336 9 r \$0-segStart;
#X obj 453 17 r \$0-segLength;
#X obj 592 36 r \$0-rev;
#X obj 453 78 +;
#X obj 453 41 t b f;
#X floatatom 86 502 5 0 0 1 nearest\ zerox\ (start) - - 0;
#N canvas 242 25 483 558 nearestZeroX 0;
#X obj 312 13 inlet;
#X obj 86 5 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 119 76 7 0 0 0 - - - 0;
#X obj 119 52 array size \$2-zeroXings;
#X obj 119 235 tabread \$2-zeroXings;
#X obj 119 129 t f b, f 9;
#X obj 119 181 +;
#X msg 171 154 0;
#X obj 119 205 t f f, f 23;
#X obj 311 45 t b f;
#X obj 119 259 -, f 29;
#X obj 119 283 abs;
#X obj 119 348 <, f 8;
#X obj 119 372 sel 1;
#X floatatom 86 454 10 0 0 0 - - - 0;
#X obj 86 29 t b b;
#X obj 179 10 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 119 307 t f f;
#X obj 119 153 until;
#X obj 119 399 int, f 23;
#X obj 86 430 int;
#X obj 173 178 + 1;
#X obj 120 100 t f b, f 23;
#X obj 267 144 array size \$2;
#X obj 86 478 tabread \$2-zeroXings;
#X obj 86 502 outlet;
#X connect 0 0 9 0;
#X connect 1 0 15 0;
#X connect 2 0 22 0;
#X connect 3 0 2 0;
#X connect 4 0 10 0;
#X connect 5 0 18 0;
#X connect 5 1 7 0;
#X connect 6 0 21 0;
#X connect 6 0 8 0;
#X connect 7 0 6 1;
#X connect 8 0 4 0;
#X connect 8 1 19 1;
#X connect 9 0 1 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 11 0 17 0;
#X connect 12 0 13 0;
#X connect 13 0 19 0;
#X connect 14 0 24 0;
#X connect 15 0 20 0;
#X connect 15 1 3 0;
#X connect 16 0 3 0;
#X connect 17 0 12 1;
#X connect 17 1 12 0;
#X connect 18 0 6 0;
#X connect 19 0 20 1;
#X connect 20 0 14 0;
#X connect 21 0 6 1;
#X connect 22 0 5 0;
#X connect 22 1 23 0;
#X connect 23 0 12 1;
#X connect 24 0 25 0;
#X restore 119 307 pd nearestZeroX;
#X floatatom 120 338 5 0 0 1 nearest\ zerox\ (start) - - 0;
#X obj 162 77 f;
#N canvas 242 25 483 558 nearestZeroX 0;
#X obj 312 13 inlet;
#X obj 86 5 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 119 76 7 0 0 0 - - - 0;
#X obj 119 52 array size \$2-zeroXings;
#X obj 119 235 tabread \$2-zeroXings;
#X obj 119 129 t f b, f 9;
#X obj 119 181 +;
#X msg 171 154 0;
#X obj 119 205 t f f, f 23;
#X obj 311 45 t b f;
#X obj 119 259 -, f 29;
#X obj 119 283 abs;
#X obj 119 348 <, f 8;
#X obj 119 372 sel 1;
#X floatatom 86 454 10 0 0 0 - - - 0;
#X obj 86 29 t b b;
#X obj 179 10 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 119 307 t f f;
#X obj 119 153 until;
#X obj 119 399 int, f 23;
#X obj 86 430 int;
#X obj 173 178 + 1;
#X obj 120 100 t f b, f 23;
#X obj 267 144 array size \$2;
#X obj 86 478 tabread \$2-zeroXings;
#X obj 86 502 outlet;
#X connect 0 0 9 0;
#X connect 1 0 15 0;
#X connect 2 0 22 0;
#X connect 3 0 2 0;
#X connect 4 0 10 0;
#X connect 5 0 18 0;
#X connect 5 1 7 0;
#X connect 6 0 21 0;
#X connect 6 0 8 0;
#X connect 7 0 6 1;
#X connect 8 0 4 0;
#X connect 8 1 19 1;
#X connect 9 0 1 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 11 0 17 0;
#X connect 12 0 13 0;
#X connect 13 0 19 0;
#X connect 14 0 24 0;
#X connect 15 0 20 0;
#X connect 15 1 3 0;
#X connect 16 0 3 0;
#X connect 17 0 12 1;
#X connect 17 1 12 0;
#X connect 18 0 6 0;
#X connect 19 0 20 1;
#X connect 20 0 14 0;
#X connect 21 0 6 1;
#X connect 22 0 5 0;
#X connect 22 1 23 0;
#X connect 23 0 12 1;
#X connect 24 0 25 0;
#X restore 409 232 pd nearestZeroX;
#X floatatom 410 263 5 0 0 1 nearest\ zerox\ (end) - - 0;
#X obj 471 112 f;
#X obj 505 83 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X connect 0 0 8 0;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 3 0 11 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 6 0 7 0;
#X connect 8 0 6 0;
#X connect 9 0 10 0;
#X connect 11 0 9 0;
#X connect 12 0 11 0;
#X restore 542 178 pd snapToZeroXings;
#X connect 1 0 15 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 6 0 2 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 6 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 8 1;
#X connect 13 0 16 0;
#X connect 14 0 7 0;
#X connect 15 0 14 0;
#X connect 16 0 15 1;
#X connect 18 0 16 0;
#X connect 18 1 16 1;
#X connect 19 0 17 0;
#X connect 19 0 18 0;
#X connect 33 0 19 0;
#X connect 35 0 3 0;
#X coords 0 -1 1 1 250 400 1 10 10;
